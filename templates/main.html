<!DOCTYPE html>
<html lang="en" >
	<head>
		<meta charset="UTF-8">
		<title>Visualization</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
		<link rel="stylesheet" href="{{url_for('static', filename='lib/css/keen-dashboards.css')}}">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dc/3.0.0/dc.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
		<link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css'>
		<link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}">
		<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/multiline.css')}}">
		<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/main_style.css')}}">

		<style>
		.loader {
  border: 8px solid #f3f3f3;
  border-radius: 50%;
  border-top: 8px solid #3498db;
  width: 20px;
  height: 20px;
  -webkit-animation: spin 2s linear infinite; /* Safari */
  animation: spin 2s linear infinite;
}
		@keyframes spin {
  	0% { transform: rotate(0deg); }
  	100% { transform: rotate(360deg); }
		}

		a {
	    text-decoration: none;
	    display: inline-block;
	    padding: 8px 16px;
	}

	a:hover {
	    background-color: #ddd;
	    color: black;
	}

	.previous {
	    background-color: #f1f1f1;
	    color: black;
	}

	.next {
	    background-color: #66a6ff;
	    color: white;
	}

	.round {
	    border-radius: 50%;
	}
		</style>
		<script
			src="https://code.jquery.com/jquery-2.2.4.min.js"
			integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
			crossorigin="anonymous"></script>

		<script>
	    $(function(){
	      $("#includedContent").load("dashboard.html");
	    });
	    </script>

	</head>
	<body>
		<!-- USING BOOTSTRAP 3.0.3 -->
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<p>project</p>
				</div>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav pull-right">

						<!--<li class="active"><a href="#">Home</a></li>
							<li><a href="#">Page</a></li>
							<li><a href="#">Link</a></li>-->
					</ul>
				</div>
				<!--/.nav-collapse -->
			</div>
		</nav>
		<div class="container">
			<!-- /.text-center -->
			<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
				<div class="container-fluid">
					<div class="navbar-header">
						<h2 style="color:#5F6A6A">Terrorist Groups Activities Analysis
					</div>
				</div>
			</div>

      <div>

      <div class="text-center" style="margin-top:50px">

        <!--<h1>Terrorist Group Analysis</h1>-->
      </div>
      <p>Terrorism is not a 21st-century phenomenon and has its roots in early resistance and political movements. While acts of global terrorism have increased considerably in the recent decades, in most parts of the world,
        it continues to be a comparatively rare event and is instead focused on particular countries or regions of instability.
				The number of terrorist attacks worldwide increased between 2005 and 2015.
				In 2005, about 171 terrorist attacks were counted, while in 2015, almost 1100 terrorist attacks were counted.
				Compared to other countries, Africa was the country with the highest lethality due to terrorist attacks in 2010.
      </p>
    </div>
    <h3 style="text-decoration: underline">Terrorism Trends</h3>
			<div class="container-fluid">
				<div class="row">
					<div class="col-sm-6">
						<div class="row">
							<!-- Time Chart -->
							<div class="col-sm-12">
								<div class="chart-wrapper">
									<div class="chart-title">
										Number of Attacks
									</div>
									<div class="chart-stage">
										<div id="time-chart"></div>
									</div>
								</div>
							</div>
							<!-- Time Chart -->
							<!-- Attacks Pie -->
							<div class="col-sm-6">
								<div class="chart-wrapper">
									<div class="chart-title">
										Number of Casualties by Attacks Type
									</div>
									<div class="chart-stage">
										<div id="attack-type-row-chart"></div>
									</div>
								</div>
							</div>
							<!-- Attacks Pie -->
							<!-- Groups Pie -->
							<div class="col-sm-6">
								<div class="chart-wrapper">
									<div class="chart-title">
										Number of Attacks by Terrorist Group
									</div>
									<div class="chart-stage">
										<div id="gname-row-chart"></div>
									</div>
								</div>
							</div>
							<!-- Groups Pie -->
						</div>
					</div>
					<!-- Map -->
					<div class="col-sm-6">
						<div class="chart-wrapper">
							<div class="chart-title">
								Distribution of Attacks
							</div>
							<div class="chart-stage">
								<div id="world-chart"></div>
							</div>
						</div>
					</div>
					<!-- Map -->
					<!-- Metric 1 -->
					<div class="col-sm-3">
						<div class="chart-wrapper">
							<div class="chart-title">
								Total Number of Attacks
							</div>
							<div class="chart-stage">
								<div id="number-attacks-nd"></div>
							</div>
						</div>
					</div>
					<!-- Metric 1 -->
					<!-- Metric 2 -->
					<div class="col-sm-3">
						<div class="chart-wrapper">
							<div class="chart-title">
								Total Number of Casualties
							</div>
							<div class="chart-stage">
								<div id="total-nkill-nd"></div>
							</div>
						</div>
					</div>
					<!-- Metric 2 -->
					<div style="margin-left: 30px">
						<button type="button" class="btn btn-default btn-sm" id="clickMe">
          <span class="glyphicon glyphicon-refresh"></span> Refresh
        </button>
					</div>

					<div class="loader" id="animloader" style="margin-left: 20px;margin-top:3px;"></div>
				</div>
			</div>
			<hr>
			<h3 style="text-decoration: underline;">Most active terrorist groups</h3>
			<p>Terrorist organizations have long threatened the security, infrastructure, and citizens of nations and communities throughout the world.
				The Islamic State of Iraq and the Levant (ISIL) or ISIS was the deadliest in 2015, responsible for 13052 casualties.
				Taliban, Boko haram, Al-Qaida, and TTP follow closely killing maximum civilians in a country.These are the five Groups
			which have caused more casualties than any other groups and more likely to involve in future attacks. </p>

			<div class="chart-wrapper" id="chart-line1"></div>

			<div style="margin-top: 30px;">
				<h4 style="text-decoration: underline;">Regions impacted by Terrorist Groups</h4>
				<p>Of the 17,958 people who died in terrorist attacks in 2013, 82 percent were in one of five countries: Iraq, Afghanistan, Pakistan, Nigeria, and Syria.
				But it's also striking where terrorism didn't occur. Much of the increase in terrorism-related fatalities in 2013 took place in Iraq,
				where terrorists claimed nearly 4,000 lives—a 168-percent increase over 2012. Worldwide, Iraq was the worst-affected country
			Below chart displays how regions are impacted by most dangerous terrorist groups </p>
			</div>
			<div class="chart-wrapper">
					<svg width="960" height="500"></svg>
					<script src="https://d3js.org/d3.v4.min.js" charset="utf-8" type="text/javascript"></script>
					<script src="https://unpkg.com/d3-sankey@0.6"></script>
					<script>

					var svg = d3.select("svg"),
					    width = +svg.attr("width"),
					    height = +svg.attr("height");

					var formatNumber = d3.format(",.0f"),
					    format = function(d) { return formatNumber(d) + " Attacks"; },
					    color = d3.scaleOrdinal(d3.schemeCategory10);

					var sankey = d3.sankey()
					    .nodeWidth(15)
					    .nodePadding(10)
					    .extent([[1, 1], [width - 1, height - 6]]);

					var link = svg.append("g")
					    .attr("class", "links")
					    .attr("fill", "none")
					    .attr("stroke", "#000")
					    .attr("stroke-opacity", 0.2)
					  .selectAll("path");

					var node = svg.append("g")
					    .attr("class", "nodes")
					    .attr("font-family", "sans-serif")
					    .attr("font-size", 10)
					  .selectAll("g");

					d3.json("http://127.0.0.1:5000/sankeydata", function(error, energy) {
					  if (error) throw error;

					  sankey(energy);

					  link = link
					    .data(energy.links)
					    .enter().append("path")
					      .attr("d", d3.sankeyLinkHorizontal())
					      .attr("stroke-width", function(d) { return Math.max(1, d.width); });

					  link.append("title")
					      .text(function(d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

					  node = node
					    .data(energy.nodes)
					    .enter().append("g");

					  node.append("rect")
					      .attr("x", function(d) { return d.x0; })
					      .attr("y", function(d) { return d.y0; })
					      .attr("height", function(d) { return d.y1 - d.y0; })
					      .attr("width", function(d) { return d.x1 - d.x0; })
					      .attr("fill", function(d) { return color(d.name.replace(/ .*/, "")); })
					      .attr("stroke", "#000");

					  node.append("text")
					      .attr("x", function(d) { return d.x0 - 6; })
					      .attr("y", function(d) { return (d.y1 + d.y0) / 2; })
					      .attr("dy", "0.35em")
					      .attr("text-anchor", "end")
					      .text(function(d) { return d.name; })
					    .filter(function(d) { return d.x0 < width / 2; })
					      .attr("x", function(d) { return d.x1 + 6; })
					      .attr("text-anchor", "start");

					  node.append("title")
					      .text(function(d) { return d.name + "\n" + format(d.value); });
					});

					</script>
			</div>
			<h3 style="margin-top: 50px;text-decoration: underline;">Predicting Terrorist groups</h3>
				<p>Predicting terrorist attacks by group networks and information about attacks is an important but difficult issue in intelligence and security informatics.
					Effective prediction of the behavior not only facilitates the understanding of
					 the dynamics of organizational behaviors but also supports homeland security’s missions in prevention and response to terrorist acts.
					 We try to predict the group responsible behind the attacks.
				 </p>
				 <a id="predictionform" class="next round">&#8250;</a>
			<div>
				<p style="margin-top: 20px">More information about world's most dangerous groups
					<a target="_blank" href="https://en.wikipedia.org/wiki/Islamic_State_of_Iraq_and_the_Levant">Islamic State of Iraq and Levant</a>,<a target="_blank" href="https://en.wikipedia.org/wiki/Taliban">Taliban</a>,<a target="_blank" href="https://en.wikipedia.org/wiki/Al-Qaeda">Al-Qaida</a>,<a target="_blank" href="https://en.wikipedia.org/wiki/Boko_Haram">Boko Haram</a>, and <a target="_blank" href="https://en.wikipedia.org/wiki/Al-Shabaab_(militant_group)">Al-Shabaab</a>
				</p>
		</div>
		</div>


		</div> <!-- /.container -->

<!-- Group charts -->


<script type="text/javascript">
    document.getElementById("predictionform").onclick = function () {
        location.href = "./formdata";
    };
</script>

	<script src="{{url_for('static', filename='lib/js/multiline.js')}}" charset="utf-8"></script>



		<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
		<script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" type="text/javascript"> </script>

		<script src="https://d3js.org/d3-array.v1.min.js" type="text/javascript"></script>
		<!--<script src="https://d3js.org/d3-geo.v1.min.js" type="text/javascript"></script>-->
		<script src="{{url_for('static', filename='lib/js/crossfilter.js')}}" type="text/javascript"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/dc/3.0.0/dc.min.js" type="text/javascript"></script>
		<!--<script src="static/lib/js/dc.js" type="text/javascript"></script>-->
		<!--<script src="static/lib/js/dc.js.map"></script>-->
		<script src="https://d3js.org/d3-queue.v3.min.js" type="text/javascript"></script>
		<script src="https://d26b395fwzu5fz.cloudfront.net/4.3.0/keen.min.js" type="text/javascript"></script>
		<script src="{{url_for('static', filename='js/graphs.js')}}" type='text/javascript'></script>
		<script type=text/javascript src="{{url_for('static', filename='js/index.js')}}"></script>

		<script type="text/javascript">
		    d3.csv('http://127.0.0.1:5000/linechart', function(error, data) {
		    data.forEach(function (d) {
		        d.year = +d.year;
		        d.Taliban = +d.Taliban;
		        d.ISIL = +d.ISIL;
		        d.AlQaida = +d.AlQaida;
		        d.LTTE = +d.LTTE;
				d.BokoHaram = +d.BokoHaram;
		    });

		    var chart = makeLineChart(data, 'year', {
		        'Taliban': {column: 'Taliban'},
		        'ISIL': {column: 'ISIL'},
		        'Al-Qaida': {column: 'AlQaida'},
		        'LTTE': {column: 'LTTE'},
				'Boko Haram': {column: 'BokoHaram'}
		    }, {xAxis: 'Years', yAxis: 'Casualties'});
		    chart.bind("#chart-line1");
		    chart.render();

		});
		</script>

	</body>
</html>
